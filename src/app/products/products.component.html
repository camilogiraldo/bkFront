<app-navigation [newUser]="newUser"></app-navigation>
<br>
<br>

<div class="container-fluid">
  <app-spinner *ngIf="loading"></app-spinner>
  <br>
  <div *ngIf="message" class="alert alert-danger box-msg fade in" role="alert">
    {{ message }}
  </div>
  <div class="row">

  <mat-card class="col-md-4" *ngFor="let product of products">
    <!-- <div class="col-md-4" *ngFor="let product of products"> -->

    <mat-card-header>
      <div mat-card-avatar class="example-header-image"></div>
      <mat-card-title><a [routerLink]="['/products/', product._id]" routerLinkActive="active">{{ product.name  | uppercase}} </a></mat-card-title>
      <mat-card-subtitle>{{ product.createdBy }}

        <!-- <br> <i class="fa fa-map-marker" aria-hidden="true"></i> {{ currentUser.location }} -->
      </mat-card-subtitle>
    </mat-card-header>

    <img src="data:{{product.images.filetype}};base64,{{product.images.value}}" alt="" [routerLink]="['/products/', product._id]" routerLinkActive="active" class="img-responsive">
    <mat-card-content>
      <p>
        {{ product.description | uppercase }}
      </p>
    </mat-card-content>
    <br />

    <div class="price">$ {{ product.price }}</div> <span> {{ product.status}}</span>
    <mat-card-actions>
      <button *ngIf="!isLogged" type="submit" (click)="loginAndBuy()" class="btn btn-success">BUY <i class="fa fa-shopping-cart" aria-hidden="true"></i> </button>
      <button *ngIf="isLogged" type="submit" (click)="addToCart(product._id)" class="btn btn-success" >ADD TO CART <i class="fa fa-shopping-cart" aria-hidden="true"></i> </button>
      <button type="submit" class="btn btn-default">SHARE</button>
    </mat-card-actions>
  </mat-card>
</div>
</div>
